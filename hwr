import tkinter as tk
from tkinter import messagebox, ttk
from datetime import datetime, timedelta
import winsound

class HomeworkApp:
Â  Â  def __init__(self, root):
Â  Â  Â  Â  self.root = root
Â  Â  Â  Â  self.root.title("TaskMaster Pro - à¸£à¸°à¸šà¸šà¸ˆà¸±à¸”à¸à¸²à¸£à¸à¸²à¸£à¸šà¹‰à¸²à¸™")
Â  Â  Â  Â  self.root.geometry("950x600") # à¸‚à¸¢à¸²à¸¢à¸«à¸™à¹‰à¸²à¸ˆà¸­à¸™à¸´à¸”à¸«à¸™à¹ˆà¸­à¸¢à¸£à¸­à¸‡à¸£à¸±à¸šà¸„à¸­à¸¥à¸±à¸¡à¸™à¹Œà¹ƒà¸«à¸¡à¹ˆ
Â  Â  Â  Â  self.root.configure(bg="#ffffff")
Â  Â  Â  Â Â 
Â  Â  Â  Â  self.homework_list = []

Â  Â  Â  Â  # --- à¸à¸²à¸£à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸² Style ---
Â  Â  Â  Â  style = ttk.Style()
Â  Â  Â  Â  style.theme_use("clam")
Â  Â  Â  Â  style.configure("Treeview", rowheight=35, font=("Leelawadee UI", 10), background="#ffffff", fieldbackground="#ffffff")
Â  Â  Â  Â  style.configure("Treeview.Heading", font=("Leelawadee UI", 10, "bold"), background="#f8f9fa")
Â  Â  Â  Â Â 
Â  Â  Â  Â  # --- Layout ---
Â  Â  Â  Â  self.main_container = tk.Frame(self.root, bg="#ffffff")
Â  Â  Â  Â  self.main_container.pack(side="left", fill="both", expand=True)
Â  Â  Â  Â Â 
Â  Â  Â  Â  self.sidebar = tk.Frame(self.root, bg="#2c3e50", width=250)
Â  Â  Â  Â  self.sidebar.pack(side="right", fill="y")
Â  Â  Â  Â  self.sidebar.pack_propagate(False)

Â  Â  Â  Â  # --- à¸à¸±à¹ˆà¸‡ Main ---
Â  Â  Â  Â  header = tk.Frame(self.main_container, bg="#ffffff", pady=20)
Â  Â  Â  Â  header.pack(fill="x")
Â  Â  Â  Â  tk.Label(header, text="Dashboard à¸à¸²à¸£à¸šà¹‰à¸²à¸™", font=("Leelawadee UI", 18, "bold"), bg="#ffffff", fg="#2c3e50").pack(anchor="w", padx=30)

Â  Â  Â  Â  # à¸ªà¹ˆà¸§à¸™à¸à¸£à¸­à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ (à¸›à¸£à¸±à¸šà¸›à¸£à¸¸à¸‡à¹ƒà¸«à¸¡à¹ˆà¹ƒà¸«à¹‰à¸¡à¸µà¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆ)
Â  Â  Â  Â  input_area = tk.Frame(self.main_container, bg="#f8f9fa", padx=30, pady=20)
Â  Â  Â  Â  input_area.pack(fill="x", padx=30, pady=10)

Â  Â  Â  Â  # à¹à¸–à¸§à¸—à¸µà¹ˆ 1
Â  Â  Â  Â  tk.Label(input_area, text="à¸Šà¸·à¹ˆà¸­à¸‡à¸²à¸™:", bg="#f8f9fa").grid(row=0, column=0, sticky="w")
Â  Â  Â  Â  self.entry_name = tk.Entry(input_area, width=30, font=("Leelawadee UI", 10), bd=1, relief="solid")
Â  Â  Â  Â  self.entry_name.grid(row=0, column=1, padx=10, pady=5)

Â  Â  Â  Â  tk.Label(input_area, text="à¸£à¸¹à¸›à¹à¸šà¸šà¸à¸²à¸£à¸ªà¹ˆà¸‡:", bg="#f8f9fa").grid(row=0, column=2, sticky="w", padx=(10,0))
Â  Â  Â  Â  self.type_combo = ttk.Combobox(input_area, values=["à¸­à¸­à¸™à¹„à¸¥à¸™à¹Œ", "à¸ªà¹ˆà¸‡à¸•à¸±à¸§à¸ˆà¸£à¸´à¸‡"], state="readonly", width=15)
Â  Â  Â  Â  self.type_combo.set("à¸­à¸­à¸™à¹„à¸¥à¸™à¹Œ") # à¸„à¹ˆà¸²à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™
Â  Â  Â  Â  self.type_combo.grid(row=0, column=3, padx=10, pady=5)

Â  Â  Â  Â  # à¹à¸–à¸§à¸—à¸µà¹ˆ 2
Â  Â  Â  Â  tk.Label(input_area, text="à¸ˆà¸³à¸™à¸§à¸™à¸§à¸±à¸™:", bg="#f8f9fa").grid(row=1, column=0, sticky="w")
Â  Â  Â  Â  self.entry_days = tk.Entry(input_area, width=10, font=("Leelawadee UI", 10), bd=1, relief="solid")
Â  Â  Â  Â  self.entry_days.grid(row=1, column=1, padx=10, pady=5, sticky="w")

Â  Â  Â  Â  self.btn_add = tk.Button(input_area, text="â• à¹€à¸à¸´à¹ˆà¸¡à¸‡à¸²à¸™à¹ƒà¸«à¸¡à¹ˆ", command=self.add_homework,Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â bg="#3498db", fg="white", font=("Leelawadee UI", 10, "bold"),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â padx=20, pady=5, relief="flat", cursor="hand2")
Â  Â  Â  Â  self.btn_add.grid(row=1, column=3, padx=10, pady=5, sticky="e")

Â  Â  Â  Â  # à¸•à¸²à¸£à¸²à¸‡à¹à¸ªà¸”à¸‡à¸œà¸¥ (à¹€à¸à¸´à¹ˆà¸¡à¸„à¸­à¸¥à¸±à¸¡à¸™à¹Œ Type)
Â  Â  Â  Â  self.tree = ttk.Treeview(self.main_container, columns=("Name", "Type", "Due", "Days"), show='headings')
Â  Â  Â  Â  self.tree.heading("Name", text=" à¸£à¸²à¸¢à¸à¸²à¸£à¸à¸²à¸£à¸šà¹‰à¸²à¸™")
Â  Â  Â  Â  self.tree.heading("Type", text="à¸£à¸¹à¸›à¹à¸šà¸šà¸à¸²à¸£à¸ªà¹ˆà¸‡")
Â  Â  Â  Â  self.tree.heading("Due", text="à¸à¸³à¸«à¸™à¸”à¸ªà¹ˆà¸‡")
Â  Â  Â  Â  self.tree.heading("Days", text="à¹€à¸«à¸¥à¸·à¸­à¹€à¸§à¸¥à¸²")
Â  Â  Â  Â Â 
Â  Â  Â  Â  self.tree.column("Name", width=200)
Â  Â  Â  Â  self.tree.column("Type", width=120, anchor="center")
Â  Â  Â  Â  self.tree.column("Due", width=120, anchor="center")
Â  Â  Â  Â  self.tree.column("Days", width=100, anchor="center")
Â  Â  Â  Â  self.tree.pack(padx=30, pady=20, fill="both", expand=True)
Â  Â  Â  Â Â 
Â  Â  Â  Â  self.btn_del = tk.Button(self.main_container, text="à¸¥à¸šà¸‡à¸²à¸™à¸—à¸µà¹ˆà¸—à¸³à¹€à¸ªà¸£à¹‡à¸ˆà¹à¸¥à¹‰à¸§", command=self.delete_homework,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â bg="#ecf0f1", fg="#7f8c8d", font=("Leelawadee UI", 9), relief="flat")
Â  Â  Â  Â  self.btn_del.pack(pady=(0, 20))

Â  Â  Â  Â  # --- à¸à¸±à¹ˆà¸‡ Sidebar ---
Â  Â  Â  Â  tk.Label(self.sidebar, text="ğŸ”” à¹à¸ˆà¹‰à¸‡à¹€à¸•à¸·à¸­à¸™à¸”à¹ˆà¸§à¸™", font=("Leelawadee UI", 12, "bold"),Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â bg="#2c3e50", fg="#e74c3c", pady=20).pack()
Â  Â  Â  Â Â 
Â  Â  Â  Â  self.alert_box = tk.Text(self.sidebar, bg="#34495e", fg="#ecf0f1", font=("Leelawadee UI", 10),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â bd=0, padx=15, pady=10, state="disabled")
Â  Â  Â  Â  self.alert_box.pack(fill="both", expand=True, padx=10, pady=10)

Â  Â  def play_alert_sound(self):
Â  Â  Â  Â  winsound.Beep(1000, 200)

Â  Â  def add_homework(self):
Â  Â  Â  Â  name = self.entry_name.get()
Â  Â  Â  Â  days_str = self.entry_days.get()
Â  Â  Â  Â  hw_type = self.type_combo.get()

Â  Â  Â  Â  if not name or not days_str:
Â  Â  Â  Â  Â  Â  messagebox.showwarning("Warning", "à¸à¸£à¸¸à¸“à¸²à¸à¸£à¸­à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹ƒà¸«à¹‰à¸„à¸£à¸šà¸–à¹‰à¸§à¸™")
Â  Â  Â  Â  Â  Â  return

Â  Â  Â  Â  try:
Â  Â  Â  Â  Â  Â  days_left = int(days_str)
Â  Â  Â  Â  Â  Â  due_date = datetime.now() + timedelta(days=days_left)
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  # à¹€à¸à¸´à¹ˆà¸¡à¸ªà¸±à¸à¸¥à¸±à¸à¸©à¸“à¹Œà¸«à¸™à¹‰à¸²à¸›à¸£à¸°à¹€à¸ à¸—
Â  Â  Â  Â  Â  Â  display_type = f"ğŸŒ {hw_type}" if hw_type == "à¸­à¸­à¸™à¹„à¸¥à¸™à¹Œ" else f"ğŸ“ {hw_type}"

Â  Â  Â  Â  Â  Â  self.homework_list.append({
Â  Â  Â  Â  Â  Â  Â  Â  "name": name,Â 
Â  Â  Â  Â  Â  Â  Â  Â  "type": display_type,
Â  Â  Â  Â  Â  Â  Â  Â  "due_obj": due_date,
Â  Â  Â  Â  Â  Â  Â  Â  "due_str": due_date.strftime("%d/%m/%Y"),
Â  Â  Â  Â  Â  Â  Â  Â  "days_left": days_left
Â  Â  Â  Â  Â  Â  })

Â  Â  Â  Â  Â  Â  if days_left <= 2:
Â  Â  Â  Â  Â  Â  Â  Â  self.play_alert_sound()

Â  Â  Â  Â  Â  Â  self.entry_name.delete(0, tk.END)
Â  Â  Â  Â  Â  Â  self.entry_days.delete(0, tk.END)
Â  Â  Â  Â  Â  Â  self.refresh_ui()

Â  Â  Â  Â  except ValueError:
Â  Â  Â  Â  Â  Â  messagebox.showerror("Error", "à¸à¸£à¸¸à¸“à¸²à¹ƒà¸ªà¹ˆà¸•à¸±à¸§à¹€à¸¥à¸‚à¹ƒà¸™à¸Šà¹ˆà¸­à¸‡à¸ˆà¸³à¸™à¸§à¸™à¸§à¸±à¸™")

Â  Â  def refresh_ui(self):
Â  Â  Â  Â  for item in self.tree.get_children():
Â  Â  Â  Â  Â  Â  self.tree.delete(item)

Â  Â  Â  Â  self.homework_list.sort(key=lambda x: x['due_obj'])

Â  Â  Â  Â  urgent_list = []
Â  Â  Â  Â  for hw in self.homework_list:
Â  Â  Â  Â  Â  Â  status_text = f"{hw['days_left']} à¸§à¸±à¸™"
Â  Â  Â  Â  Â  Â  self.tree.insert("", tk.END, values=(hw['name'], hw['type'], hw['due_str'], status_text))
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if hw['days_left'] <= 2:
Â  Â  Â  Â  Â  Â  Â  Â  urgent_list.append(f"â€¢ {hw['name']}\nÂ  ({hw['type']})\nÂ  à¹€à¸«à¸¥à¸·à¸­ {hw['days_left']} à¸§à¸±à¸™!")

Â  Â  Â  Â  self.alert_box.config(state="normal")
Â  Â  Â  Â  self.alert_box.delete("1.0", tk.END)
Â  Â  Â  Â  if urgent_list:
Â  Â  Â  Â  Â  Â  self.alert_box.insert(tk.END, "\n\n".join(urgent_list))
Â  Â  Â  Â  else:
Â  Â  Â  Â  Â  Â  self.alert_box.insert(tk.END, "à¹„à¸¡à¹ˆà¸¡à¸µà¸‡à¸²à¸™à¸”à¹ˆà¸§à¸™à¸ˆà¹‰à¸² âœ¨")
Â  Â  Â  Â  self.alert_box.config(state="disabled")

Â  Â  def delete_homework(self):
Â  Â  Â  Â  selected = self.tree.selection()
Â  Â  Â  Â  if selected:
Â  Â  Â  Â  Â  Â  # à¹ƒà¸Šà¹‰à¸„à¸­à¸¥à¸±à¸¡à¸™à¹Œà¸Šà¸·à¹ˆà¸­à¹ƒà¸™à¸à¸²à¸£à¸„à¹‰à¸™à¸«à¸²à¹€à¸à¸·à¹ˆà¸­à¸¥à¸š (à¸–à¹‰à¸²à¸Šà¸·à¹ˆà¸­à¸‹à¹‰à¸³à¸­à¸²à¸ˆà¸ˆà¸°à¸¡à¸µà¸›à¸±à¸à¸«à¸²à¹€à¸¥à¹‡à¸à¸™à¹‰à¸­à¸¢à¹ƒà¸™à¸£à¸°à¸šà¸šà¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡à¸™à¸µà¹‰)
Â  Â  Â  Â  Â  Â  name_to_del = self.tree.item(selected)['values'][0]
Â  Â  Â  Â  Â  Â  self.homework_list = [hw for hw in self.homework_list if hw['name'] != name_to_del]
Â  Â  Â  Â  Â  Â  self.refresh_ui()

if __name__ == "__main__":
Â  Â  root = tk.Tk()
Â  Â  app = HomeworkApp(root)
Â  Â  root.mainloop()
